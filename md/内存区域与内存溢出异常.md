# Java内存区域与内存溢出异常

## 1 概述

在虚拟机自动内存管理机制的情况下，不需要为每一个new操作去写配对的delete和free。然而，正式由于把控制内存的权力交给了Java虚拟机，一旦出现内存泄漏和溢出方面的问题，如果不了解虚拟机是怎么使用内存的，就很难排除错误、修正问题。

## 2 运行时数据区

Java虚拟机在执行Java程序时会将所管理的内存划分为若干个数据区域

<img src="E:\learning\04_java\01_笔记\jvm\picture\java虚拟机运行时数据区.png" style="zoom:80%;" />

### 2.1 程序计数器

程序计数器是一块较小的内存空间，它可以看作当前线程所执行的字节码的行号指示器。

字节码解释器工作时就是通过改变这个计数器的值来选取下一条需要执行的指令。（程序流程指示器）

Java虚拟机的多线程是通过线程轮流切换、分配处理器执行时间的 方式来实现的。为了线程切换后能够恢复到正确的执行位置，每条线程都需要有一个单独的程序计数器。独立存储，”线程私有“。

如果正在执行的是本地(Native)方法，这个计数器的值则应为空。

## 2.2 Java虚拟机栈

”线程私有“，生命周期与线程相同

每个方法被执行时，Java虚拟机都会同步创建一个栈帧(Stack Frame)用于存储局部变量表，操作数栈、动态连接、方法出口等。